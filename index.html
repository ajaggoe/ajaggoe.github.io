<head>
  <style>
    html {
    --primary-color: #ffeb3b;
    --border-color: var(--primary-color);
    --text-color: #333;
    --background-color: #f3f;
  }
  html.dark {
    --border-color: #ccc;
    --text-color: #ccc;
    --background-color: #181818;
  }
  </style> 
</head>
<body>
<p id="error"></p>
<p id="shake-count">0</p>
<p id="acc-info"></p>
<p>gyroscope</p>
<p id="gyro"></p>
<p id="light"></p>
<video autoplay></video>
<label for="videoSource">Video source: </label><select id="videoSource"> </select>
<button id="videoShow" onclick="showVid()">Show video</button>
<button id="videoHide" onclick="hideVid()">Hide video</button>

<script>
const constraints = {
  video: true,
};

const video = document.querySelector("video");
const videoSelect = document.querySelector("select#videoSource");

const sensor = new AmbientLightSensor();
sensor.onreading = () => console.log(sensor.illuminance);
sensor.onerror = event => console.log(event.error.name, event.error.message);
sensor.start();

let nav = navigator.mediaDevices.enumerateDevices()
	.then(gotDevices)

function showVid() {
    nav.then(getStream)
    .catch(handleError)	
  
}

function hideVid() {
  video.srcObject = null;
}



function gotDevices(deviceInfos) {
  for (let i = 0; i !== deviceInfos.length; ++i) {
    const deviceInfo = deviceInfos[i];
    const option = document.createElement("option");
    option.value = deviceInfo.deviceId;
	console.log(deviceInfo.deviceId);
    if (deviceInfo.kind === "videoinput") {
      option.text = deviceInfo.label || "camera " + (videoSelect.length + 1);
      videoSelect.appendChild(option);
    } else {
      console.log("Found another kind of device: ", deviceInfo);
    }
  }
}
function getStream() {
  if (window.stream) {
    window.stream.getTracks().forEach(function (track) {
      track.stop();
    });
  }

  const constraints = {
    video: {
      deviceId: { exact: videoSelect.value },
    }
  };

  navigator.mediaDevices
    .getUserMedia(constraints)
    .then(gotStream)
    .catch(handleError);
}
function gotStream(stream) {
  window.stream = stream; // make stream available to console
  video.srcObject = stream;
}
function handleError(error) {
  console.error("Error: ", error);
}
</script>
<script type="application/javascript" src="sensors_deviceMotion.js">	

</script>
</body>